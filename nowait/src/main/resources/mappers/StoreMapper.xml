<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="ezen.nowait.store.mapper.StoreMapper">

	<select id="selectAll" resultType="ezen.nowait.store.domain.StoreVO">
		select * from store order by order_cnt desc
	</select>
	
	<select id="selectByCategory" resultType="ezen.nowait.store.domain.StoreVO">
		select * from store where store_category = #{storeCategory} order by order_cnt desc
	</select>
	
	<select id="selectByOwnerId" resultType="ezen.nowait.store.domain.StoreVO">
		select * from store
		where cr_num = (
			select cr_num
			from owner_store
			where owner_id = #{ownerId}
		)
	</select>
	
	<select id="selectStoreByCrNum" resultType="ezen.nowait.store.domain.StoreVO">
		select * from store where cr_num = #{crNum}
	</select>
	
	<insert id="insertStore">
		insert into store
		values(#{crNum}, #{storeName}, #{storeCategory}, #{storeAddr}, #{storeTel}, #{storeEmail}, #{opentime}, #{storeInfo}, default, default)
	</insert>
	
	<insert id="insertOwnerStore">
		insert into owner_store
		values(#{ownerId}, #{crNum}, #{secretCode})
	</insert>
	
	<update id="updateStore">
		update store
		set store_name = #{storeName},
		store_category = #{storeCategory},
		store_addr = #{storeAddr},
		store_tel = #{storeTel},
		store_email = #{storeEmail},
		opentime = #{opentime},
		store_info = #{storeInfo}
		where cr_num = #{crNum}
	</update>
	
	<delete id="deleteStore">
		delete from store where cr_num = #{crNum}
	</delete>
	
</mapper>